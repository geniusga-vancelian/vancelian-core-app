# Production Environment Configuration
# Copy this file to .env.prod and fill in actual values
# NEVER commit .env.prod to version control

# Environment
ENV=production
LOG_LEVEL=INFO

# Database (PostgreSQL)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=vancelian_core

# Database Roles (for least privilege)
POSTGRES_READWRITE_USER=vancelian_readwrite
POSTGRES_READWRITE_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_READONLY_USER=vancelian_readonly
POSTGRES_READONLY_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# Database URL (application uses readwrite role)
# DATABASE_URL is constructed from above, or set explicitly:
# DATABASE_URL=postgresql://vancelian_readwrite:PASSWORD@postgres:5432/vancelian_core

# Redis
REDIS_PASSWORD=CHANGE_ME_STRONG_PASSWORD
# REDIS_URL is constructed from above, or set explicitly:
# REDIS_URL=redis://:PASSWORD@redis:6379/0

# Security
SECRET_KEY=CHANGE_ME_MIN_32_CHARS_STRONG_SECRET_KEY_FOR_PRODUCTION
ALLOWED_ORIGINS=https://app.vancelian.com,https://admin.vancelian.com

# Webhook Security - ZAND Bank
ZAND_WEBHOOK_SECRET=CHANGE_ME_WEBHOOK_SECRET_FROM_ZAND_BANK
ZAND_WEBHOOK_TOLERANCE_SECONDS=300

# Rate Limiting
RL_WEBHOOK_PER_MIN=120
RL_ADMIN_PER_MIN=60
RL_API_PER_MIN=120

# Security Headers
ENABLE_HSTS=true

# OIDC / JWT Authentication (Zitadel-compatible)
OIDC_ISSUER_URL=https://auth.zitadel.cloud
OIDC_AUDIENCE=your-client-id-here
OIDC_JWKS_URL=  # Optional: explicit JWKS URL (if absent, derived from issuer/.well-known/jwks.json)
OIDC_ALGORITHMS=RS256  # Allowed JWT algorithms (comma-separated)
OIDC_REQUIRED_SCOPES=  # Optional: required scopes (comma-separated)
OIDC_CLOCK_SKEW_SECONDS=60  # Clock skew tolerance for token validation
OIDC_ROLE_CLAIM_PATHS=realm_access.roles,resource_access.{audience}.roles,roles  # Comma-separated paths to extract roles

# API Configuration
API_V1_PREFIX=/api/v1
ADMIN_V1_PREFIX=/admin/v1
WEBHOOKS_V1_PREFIX=/webhooks/v1

# Nginx
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# Optional: Admin/Webhook IP Whitelist
# Configure in nginx/default.conf or via environment-specific config

# Observability
METRICS_PUBLIC=false  # Make /metrics endpoint public (default: protected)
METRICS_TOKEN=  # Static token for /metrics access (if METRICS_PUBLIC=false)

